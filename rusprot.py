from typing import Dict, Union, List, Tuple

Q: Dict[int, str] = {
    0:"Ваш бюджет ограничен?",
    1:"Сколько готовы потратить?",
    2:"Хотите NFT лимитированного тиража?",
    3:"Что важнее в недорогом сегменте? (Арт/Мем)",
    4:"В среднем сегменте: романтика или статус?",
    5:"В высоком сегменте: нужна анимация?",
    6:"Премиум: подарок или статус под профилем?",
    7:"Источник редкости важнее? (Официальные коллекции)",
    8:"Что важнее: дизайн или символизм?",
    9:"Арт-стиль: минимализм или детали?",
    10:"Мем-тип: животные или поп-культура?",
    11:"Романтика: с текстом или без?",
    12:"Статус: эксклюзив 1/100 или дорогой редкий?",
    13:"Анимация: GIF или 3D?",
    14:"Статика: классика или комикс?",
    15:"Подарок другу: смешной или символический?",
    16:"Статус: редкий Telegram или коллекционный?",
    17:"Инвестиция: Telegram Stars?",
    18:"Инвестиция: авторские коллекции?",
    19:"Дизайн важен: шрифт должен быть выразительным?",
    20:"Символизм важен: добавляем фразу/мото?",
    21:"Минимализм: оставить однотонный фон?",
    22:"Детали: добавить текстуры?",
    23:"Мем-животное: кот или собака?",
    24:"Мем-поп: герой или тренд недели?",
    25:"Романтика-текст: короткая надпись?",
    26:"Романтика-изображение: сердце или пара?",
    27:"Эксклюзив: подтверждать тираж на карточке?",
    28:"Дорогой редкий: отображать бейдж редкости?",
    29:"GIF: нужна ли петля (loop)?",
    30:"3D: добавлять лёгкое вращение?",
    31:"Классика: добавлять мягкую тень?",
    32:"Комикс: нужны контур и заливки?",
    33:"Нужна ли рамка/бейдж?",
    34:"Повысить уровень редкости?",
    35:"Сделать подарок персонализированным?",
    36:"Выбрать глянцевый стиль?",
    37:"Добавить юмор в надпись?",
    38:"Какой контраст предпочтителен?",
    39:"Добавить светящиеся элементы?",
    40:"Выбрать тёплую цветовую гамму?",
    41:"Сделать акцент на тексте?",
    42:"Формат NFT: квадратный?",
    43:"Добавить фоновый узор?",
    44:"Сделать NFT монохромным?",
    45:"Язык подписи выбрать русский?",
    46:"Размер текста сделать крупным?",
    47:"Добавить контур элементов?",
    48:"Скорость анимации сделать быстрой?",
    49:"Добавить дату события на NFT?",
}


Result = Union[int, Tuple[str, str]]

G: Dict[int, List[Tuple[str, Result]]] = {}

def edge(q: int, option: str, to: Result):
    G.setdefault(q, []).append((option, to))


edge(0,"Да",1); edge(0,"Нет",2)

edge(1,"До 500₽",3); edge(1,"До 5 000₽",4); edge(1,"До 50 000₽",5); edge(1,"Более 50 000₽",6)

edge(2,"Да",7); edge(2,"Нет",8)

edge(3,"Арт",9); edge(3,"Мем",10)

edge(4,"Романтика",11); edge(4,"Статус",12)

edge(5,"Да",13); edge(5,"Нет",14)

edge(6,"Подарок",15); edge(6,"Статус",16)

edge(7,"Telegram-коллекции",27); edge(7,"Авторские серии",28)

edge(8,"Дизайн",19); edge(8,"Символизм",20)

edge(9,"Минимализм",21); edge(9,"Детали",22)

edge(10,"Животные",23); edge(10,"Поп-культура",24)

edge(11,"С текстом",25); edge(11,"С изображением",26)

edge(12,"Эксклюзив 1/100",27); edge(12,"Дорогой редкий",28)

edge(13,"GIF",29); edge(13,"3D",30)

edge(14,"Классика",31); edge(14,"Комикс",32)

edge(15,"Смешной",("FINAL","Подарочный NFT — смешной стиль"))
edge(15,"Символический",("FINAL","Подарочный NFT — символический стиль"))
edge(15,"Уточнить оформление",33)

edge(16,"Редкий Telegram",("FINAL","Статусный NFT — редкий Telegram"))
edge(16,"Коллекционный",("FINAL","Статусный NFT — коллекционный"))
edge(16,"Уточнить оформление",34)

edge(17,"Да",("FINAL","Инвест-NFT — Telegram Stars"))
edge(17,"Нет",("FINAL","Инвест-NFT — другие активы"))
edge(17,"Уточнить оформление",35)

edge(18,"Да",("FINAL","Инвест-NFT — авторские коллекции"))
edge(18,"Нет",("FINAL","Инвест-NFT — без авторских коллекций"))
edge(18,"Уточнить оформление",36)

edge(19,"Да",("FINAL","Выразительная типографика (дизайн-акцент)"))
edge(19,"Нет",("FINAL","Нейтральная типографика (читаемость)"))
edge(19,"Уточнить оформление",37)

edge(20,"Да",("FINAL","Добавить фразу/мото (символизм)"))
edge(20,"Нет",("FINAL","Без фразы, акцент на образе"))
edge(20,"Уточнить оформление",38)

edge(21,"Да",("FINAL","Однотонный фон (минимализм)"))
edge(21,"Нет",("FINAL","Добавить мягкий фон/градиент"))
edge(21,"Уточнить оформление",39)

edge(22,"Да",("FINAL","Добавить текстуры/паттерны"))
edge(22,"Нет",("FINAL","Без лишних текстур"))
edge(22,"Уточнить оформление",40)

edge(23,"Кот",("FINAL","Мем-NFT с котом"))
edge(23,"Собака",("FINAL","Мем-NFT с собакой"))
edge(23,"Уточнить оформление",41)

edge(24,"Герой",("FINAL","Мем из поп-культуры — герой"))
edge(24,"Тренд недели",("FINAL","Мем из поп-культуры — тренд"))
edge(24,"Уточнить оформление",42)

edge(25,"Да",("FINAL","Романтический NFT — короткая надпись"))
edge(25,"Нет",("FINAL","Романтический NFT — длинная подпись"))
edge(25,"Уточнить оформление",43)

edge(26,"Сердце",("FINAL","Романтический NFT — сердце"))
edge(26,"Пара",("FINAL","Романтический NFT — пара"))
edge(26,"Уточнить оформление",44)

edge(27,"Да",("FINAL","Указывать тираж на карточке"))
edge(27,"Нет",("FINAL","Тираж не указывать"))
edge(27,"Уточнить оформление",45)

edge(28,"Да",("FINAL","Показывать бейдж редкости"))
edge(28,"Нет",("FINAL","Без бейджа редкости"))
edge(28,"Уточнить оформление",46)

edge(29,"Да",("FINAL","GIF с петлёй (loop)"))
edge(29,"Нет",("FINAL","GIF без петли"))
edge(29,"Уточнить оформление",47)

edge(30,"Да",("FINAL","3D с лёгким вращением"))
edge(30,"Нет",("FINAL","3D без вращения"))
edge(30,"Уточнить оформление",48)

edge(31,"Да",("FINAL","Добавить мягкую тень"))
edge(31,"Нет",("FINAL","Без тени, плоский стиль"))
edge(31,"Уточнить оформление",49)

edge(32,"Вариант 1",("FINAL","Комикс-стиль — базовая версия"))
edge(32,"Вариант 2",("FINAL","Комикс-стиль — расширенная версия"))

edge(33,"Да",("FINAL","NFT с рамкой/бейджем"))
edge(33,"Нет",("FINAL","NFT без рамки (минимализм)"))

edge(34,"Да",("FINAL","Повышенная редкость (ограниченный выпуск)"))
edge(34,"Нет",("FINAL","Обычная редкость"))

edge(35,"Да",("FINAL","Персонализация (имя/надпись)"))
edge(35,"Нет",("FINAL","Без персонализации"))

edge(36,"Да",("FINAL","Глянцевый стиль"))
edge(36,"Нет",("FINAL","Матовый стиль"))

edge(37,"Да",("FINAL","Юмористическая надпись"))
edge(37,"Нет",("FINAL","Без юмора"))

edge(38,"Высокий",("FINAL","Высокий контраст"))
edge(38,"Мягкий",("FINAL","Мягкий контраст"))

edge(39,"Да",("FINAL","Светящиеся элементы/неон"))
edge(39,"Нет",("FINAL","Без подсветки"))

edge(40,"Да",("FINAL","Тёплая гамма"))
edge(40,"Нет",("FINAL","Холодная гамма"))

edge(41,"Да",("FINAL","Акцент на тексте"))
edge(41,"Нет",("FINAL","Акцент на изображении"))

edge(42,"Да",("FINAL","Квадратный формат 1:1"))
edge(42,"Нет",("FINAL","Портретный формат 4:5"))

edge(43,"Да",("FINAL","Фоновый узор (паттерн)"))
edge(43,"Нет",("FINAL","Однотонный фон"))

edge(44,"Да",("FINAL","Монохромный (ч/б)"))
edge(44,"Нет",("FINAL","Цветной"))

edge(45,"Да",("FINAL","Подпись на русском"))
edge(45,"Нет",("FINAL","Подпись на английском"))

edge(46,"Да",("FINAL","Крупный текст"))
edge(46,"Нет",("FINAL","Умеренный текст"))

edge(47,"Да",("FINAL","Контур для элементов"))
edge(47,"Нет",("FINAL","Без контура"))

edge(48,"Да",("FINAL","Быстрая анимация"))
edge(48,"Нет",("FINAL","Плавная анимация"))

edge(49,"Да",("FINAL","Добавить дату события"))
edge(49,"Нет",("FINAL","Без даты"))


def ask(q_id: int) -> str:
    """Печать вопроса и вариантов, возврат выбранного текста варианта."""
    opts = G[q_id]
    print(f"\n[{q_id}] {Q[q_id]}")
    for i, (t, _) in enumerate(opts, 1):
        print(f"  {i}) {t}")
    while True:
        raw = input("Ваш выбор (номер): ").strip()
        if raw.isdigit():
            k = int(raw)
            if 1 <= k <= len(opts):
                return opts[k-1][0]
        print("Введите корректный номер варианта.")

def run(start: int = 0):
    path: List[Tuple[int, str]] = []
    q = start
    while True:
        if q not in G:
            print(f"\nОшибка: нет вариантов для узла {q}")
            return
        choice_text = ask(q)

        for t, nxt in G[q]:
            if t == choice_text:
                path.append((q, t))
                if isinstance(nxt, tuple) and nxt[0] == "FINAL":

                    print("\n—" * 50)
                    print("ИТОГОВАЯ РЕКОМЕНДАЦИЯ:")
                    print("• " + nxt[1])
                    print("\nПуть решения:")
                    for qi, ans in path:
                        print(f"- [{qi}] {Q[qi]} → {ans}")
                    print("—" * 50)
                    return
                else:
                    q = nxt  
                break

if __name__ == "__main__":
    print("Экспертная система: выбор NFT-подарка в Telegram")
    run(0)